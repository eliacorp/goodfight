(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/common/http'), require('@angular/platform-browser'), require('rxjs'), require('rxjs/operators'), require('@angular/common')) :
    typeof define === 'function' && define.amd ? define('@gorniv/ngx-transfer-http', ['exports', '@angular/core', '@angular/common/http', '@angular/platform-browser', 'rxjs', 'rxjs/operators', '@angular/common'], factory) :
    (factory((global.gorniv = global.gorniv || {}, global.gorniv['ngx-transfer-http'] = {}),global.ng.core,global.ng.common.http,global.ng.platformBrowser,global.rxjs,global.rxjs.operators,global.ng.common));
}(this, (function (exports,core,http,platformBrowser,rxjs,operators,common) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    var TransferHttpService = /** @class */ (function () {
        function TransferHttpService(transferState, httpClient, platformId) {
            this.transferState = transferState;
            this.httpClient = httpClient;
            this.platformId = platformId;
        }
        /**
         * @template T
         * @param {?} method
         * @param {?} uri
         * @param {?=} options
         * @return {?}
         */
        TransferHttpService.prototype.request = /**
         * @template T
         * @param {?} method
         * @param {?} uri
         * @param {?=} options
         * @return {?}
         */
            function (method, uri, options) {
                var _this = this;
                // tslint:disable-next-line:no-shadowed-variable
                return this.getData(method, uri, options, function (method, url, options) {
                    return _this.httpClient.request(method, url, options);
                });
            };
        /**
         * Performs a request with `get` http method.
         */
        /**
         * Performs a request with `get` http method.
         * @template T
         * @param {?} url
         * @param {?=} options
         * @return {?}
         */
        TransferHttpService.prototype.get = /**
         * Performs a request with `get` http method.
         * @template T
         * @param {?} url
         * @param {?=} options
         * @return {?}
         */
            function (url, options) {
                var _this = this;
                // tslint:disable-next-line:no-shadowed-variable
                return this.getData('get', url, options, function (_method, url, options) {
                    return _this.httpClient.get(url, options);
                });
            };
        /**
         * Performs a request with `post` http method.
         */
        /**
         * Performs a request with `post` http method.
         * @template T
         * @param {?} url
         * @param {?} body
         * @param {?=} options
         * @return {?}
         */
        TransferHttpService.prototype.post = /**
         * Performs a request with `post` http method.
         * @template T
         * @param {?} url
         * @param {?} body
         * @param {?=} options
         * @return {?}
         */
            function (url, body, options) {
                var _this = this;
                // tslint:disable-next-line:no-shadowed-variable
                return this.getPostData('post', url, body, options, 
                // tslint:disable-next-line:no-shadowed-variable
                function (_method, url, body, options) {
                    return _this.httpClient.post(url, body, options);
                });
            };
        /**
         * Performs a request with `put` http method.
         */
        /**
         * Performs a request with `put` http method.
         * @template T
         * @param {?} url
         * @param {?} _body
         * @param {?=} options
         * @return {?}
         */
        TransferHttpService.prototype.put = /**
         * Performs a request with `put` http method.
         * @template T
         * @param {?} url
         * @param {?} _body
         * @param {?=} options
         * @return {?}
         */
            function (url, _body, options) {
                var _this = this;
                // tslint:disable-next-line:no-shadowed-variable
                return this.getPostData('put', url, _body, options, function (_method, url, _body, options) {
                    return _this.httpClient.put(url, _body, options);
                });
            };
        /**
         * Performs a request with `delete` http method.
         */
        /**
         * Performs a request with `delete` http method.
         * @template T
         * @param {?} url
         * @param {?=} options
         * @return {?}
         */
        TransferHttpService.prototype.delete = /**
         * Performs a request with `delete` http method.
         * @template T
         * @param {?} url
         * @param {?=} options
         * @return {?}
         */
            function (url, options) {
                var _this = this;
                // tslint:disable-next-line:no-shadowed-variable
                return this.getData('delete', url, options, function (_method, url, options) {
                    return _this.httpClient.delete(url, options);
                });
            };
        /**
         * Performs a request with `patch` http method.
         */
        /**
         * Performs a request with `patch` http method.
         * @template T
         * @param {?} url
         * @param {?} body
         * @param {?=} options
         * @return {?}
         */
        TransferHttpService.prototype.patch = /**
         * Performs a request with `patch` http method.
         * @template T
         * @param {?} url
         * @param {?} body
         * @param {?=} options
         * @return {?}
         */
            function (url, body, options) {
                var _this = this;
                // tslint:disable-next-line:no-shadowed-variable
                return this.getPostData('patch', url, body, options, 
                // tslint:disable-next-line:no-shadowed-variable
                function (_method, url, body, options) {
                    return _this.httpClient.patch(url, body, options);
                });
            };
        /**
         * Performs a request with `head` http method.
         */
        /**
         * Performs a request with `head` http method.
         * @template T
         * @param {?} url
         * @param {?=} options
         * @return {?}
         */
        TransferHttpService.prototype.head = /**
         * Performs a request with `head` http method.
         * @template T
         * @param {?} url
         * @param {?=} options
         * @return {?}
         */
            function (url, options) {
                var _this = this;
                // tslint:disable-next-line:no-shadowed-variable
                return this.getData('head', url, options, function (_method, url, options) {
                    return _this.httpClient.head(url, options);
                });
            };
        /**
         * Performs a request with `options` http method.
         */
        /**
         * Performs a request with `options` http method.
         * @template T
         * @param {?} url
         * @param {?=} options
         * @return {?}
         */
        TransferHttpService.prototype.options = /**
         * Performs a request with `options` http method.
         * @template T
         * @param {?} url
         * @param {?=} options
         * @return {?}
         */
            function (url, options) {
                var _this = this;
                // tslint:disable-next-line:no-shadowed-variable
                return this.getData('options', url, options, 
                // tslint:disable-next-line:no-shadowed-variable
                function (_method, url, options) {
                    return _this.httpClient.options(url, options);
                });
            };
        // tslint:disable-next-line:max-line-length
        // tslint:disable-next-line:max-line-length
        /**
         * @template T
         * @param {?} method
         * @param {?} uri
         * @param {?} options
         * @param {?} callback
         * @return {?}
         */
        TransferHttpService.prototype.getData =
            // tslint:disable-next-line:max-line-length
            /**
             * @template T
             * @param {?} method
             * @param {?} uri
             * @param {?} options
             * @param {?} callback
             * @return {?}
             */
            function (method, uri, options, callback) {
                var _this = this;
                /** @type {?} */
                var url = uri;
                if (typeof uri !== 'string') {
                    url = uri.url;
                }
                /** @type {?} */
                var tempKey = url + (options ? JSON.stringify(options) : '');
                /** @type {?} */
                var key = platformBrowser.makeStateKey(tempKey);
                try {
                    return this.resolveData(key);
                }
                catch (e) {
                    return callback(method, uri, options).pipe(operators.tap(function (data) {
                        if (common.isPlatformBrowser(_this.platformId)) ;
                        if (common.isPlatformServer(_this.platformId)) {
                            _this.setCache(key, data);
                        }
                    }));
                }
            };
        /**
         * @template T
         * @param {?} _method
         * @param {?} uri
         * @param {?} body
         * @param {?} options
         * @param {?} callback
         * @return {?}
         */
        TransferHttpService.prototype.getPostData = /**
         * @template T
         * @param {?} _method
         * @param {?} uri
         * @param {?} body
         * @param {?} options
         * @param {?} callback
         * @return {?}
         */
            function (_method, uri, body, options, callback) {
                var _this = this;
                /** @type {?} */
                var url = uri;
                if (typeof uri !== 'string') {
                    url = uri.url;
                }
                /** @type {?} */
                var tempKey = url + (body ? JSON.stringify(body) : '') + (options ? JSON.stringify(options) : '');
                /** @type {?} */
                var key = platformBrowser.makeStateKey(tempKey);
                try {
                    return this.resolveData(key);
                }
                catch (e) {
                    return callback(_method, uri, body, options).pipe(operators.tap(function (data) {
                        if (common.isPlatformBrowser(_this.platformId)) ;
                        if (common.isPlatformServer(_this.platformId)) {
                            _this.setCache(key, data);
                        }
                    }));
                }
            };
        /**
         * @template T
         * @param {?} key
         * @return {?}
         */
        TransferHttpService.prototype.resolveData = /**
         * @template T
         * @param {?} key
         * @return {?}
         */
            function (key) {
                /** @type {?} */
                var data = this.getFromCache(key);
                if (!data) {
                    throw new Error();
                }
                if (common.isPlatformBrowser(this.platformId)) {
                    // Client only code.
                    this.transferState.remove(key);
                }
                if (common.isPlatformServer(this.platformId)) ;
                return rxjs.from(Promise.resolve(data));
            };
        /**
         * @template T
         * @param {?} key
         * @param {?} data
         * @return {?}
         */
        TransferHttpService.prototype.setCache = /**
         * @template T
         * @param {?} key
         * @param {?} data
         * @return {?}
         */
            function (key, data) {
                return this.transferState.set(key, data);
            };
        /**
         * @template T
         * @param {?} key
         * @return {?}
         */
        TransferHttpService.prototype.getFromCache = /**
         * @template T
         * @param {?} key
         * @return {?}
         */
            function (key) {
                return this.transferState.get(key, null);
            };
        TransferHttpService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        TransferHttpService.ctorParameters = function () {
            return [
                { type: platformBrowser.TransferState },
                { type: http.HttpClient },
                { type: Object, decorators: [{ type: core.Inject, args: [core.PLATFORM_ID,] }] }
            ];
        };
        return TransferHttpService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */
    var TransferHttpModule = /** @class */ (function () {
        function TransferHttpModule() {
        }
        TransferHttpModule.decorators = [
            { type: core.NgModule, args: [{
                        providers: [TransferHttpService],
                    },] }
        ];
        return TransferHttpModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
     */

    exports.TransferHttpModule = TransferHttpModule;
    exports.TransferHttpService = TransferHttpService;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ29ybml2LW5neC10cmFuc2Zlci1odHRwLnVtZC5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vQGdvcm5pdi9uZ3gtdHJhbnNmZXItaHR0cC9zcmMvdHJhbnNmZXItaHR0cC5zZXJ2aWNlLnRzIiwibmc6Ly9AZ29ybml2L25neC10cmFuc2Zlci1odHRwL3NyYy90cmFuc2Zlci1odHRwLm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3QsIFBMQVRGT1JNX0lEIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycywgSHR0cFBhcmFtcyB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IFRyYW5zZmVyU3RhdGUsIFN0YXRlS2V5LCBtYWtlU3RhdGVLZXkgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJztcbmltcG9ydCB7IE9ic2VydmFibGUsIGZyb20gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IGlzUGxhdGZvcm1Ccm93c2VyLCBpc1BsYXRmb3JtU2VydmVyIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFRyYW5zZmVySHR0cFNlcnZpY2Uge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgdHJhbnNmZXJTdGF0ZTogVHJhbnNmZXJTdGF0ZSxcbiAgICBwcml2YXRlIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQsXG4gICAgQEluamVjdChQTEFURk9STV9JRCkgcHJpdmF0ZSBwbGF0Zm9ybUlkOiBPYmplY3QsXG4gICkge31cblxuICByZXF1ZXN0PFQ+KFxuICAgIG1ldGhvZDogc3RyaW5nLFxuICAgIHVyaTogc3RyaW5nIHwgUmVxdWVzdCxcbiAgICBvcHRpb25zPzoge1xuICAgICAgYm9keT86IGFueTtcbiAgICAgIGhlYWRlcnM/OlxuICAgICAgICB8IEh0dHBIZWFkZXJzXG4gICAgICAgIHwge1xuICAgICAgICAgIFtoZWFkZXI6IHN0cmluZ106IHN0cmluZyB8IHN0cmluZ1tdO1xuICAgICAgICB9O1xuICAgICAgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuO1xuICAgICAgb2JzZXJ2ZT86ICdyZXNwb25zZSc7XG4gICAgICBwYXJhbXM/OlxuICAgICAgICB8IEh0dHBQYXJhbXNcbiAgICAgICAgfCB7XG4gICAgICAgICAgW3BhcmFtOiBzdHJpbmddOiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICAgICAgfTtcbiAgICAgIHJlc3BvbnNlVHlwZT86ICdqc29uJztcbiAgICAgIHdpdGhDcmVkZW50aWFscz86IGJvb2xlYW47XG4gICAgfSxcbiAgKTogT2JzZXJ2YWJsZTxUPiB7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXNoYWRvd2VkLXZhcmlhYmxlXG4gICAgcmV0dXJuIHRoaXMuZ2V0RGF0YTxUPihtZXRob2QsIHVyaSwgb3B0aW9ucywgKG1ldGhvZDogc3RyaW5nLCB1cmw6IHN0cmluZywgb3B0aW9uczogYW55KSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnJlcXVlc3Q8VD4obWV0aG9kLCB1cmwsIG9wdGlvbnMpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGEgcmVxdWVzdCB3aXRoIGBnZXRgIGh0dHAgbWV0aG9kLlxuICAgKi9cbiAgZ2V0PFQ+KFxuICAgIHVybDogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiB7XG4gICAgICBoZWFkZXJzPzpcbiAgICAgICAgfCBIdHRwSGVhZGVyc1xuICAgICAgICB8IHtcbiAgICAgICAgICBbaGVhZGVyOiBzdHJpbmddOiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICAgICAgfTtcbiAgICAgIG9ic2VydmU/OiAncmVzcG9uc2UnO1xuICAgICAgcGFyYW1zPzpcbiAgICAgICAgfCBIdHRwUGFyYW1zXG4gICAgICAgIHwge1xuICAgICAgICAgIFtwYXJhbTogc3RyaW5nXTogc3RyaW5nIHwgc3RyaW5nW107XG4gICAgICAgIH07XG4gICAgICByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW47XG4gICAgICByZXNwb25zZVR5cGU/OiAnanNvbic7XG4gICAgICB3aXRoQ3JlZGVudGlhbHM/OiBib29sZWFuO1xuICAgIH0sXG4gICk6IE9ic2VydmFibGU8VD4ge1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1zaGFkb3dlZC12YXJpYWJsZVxuICAgIHJldHVybiB0aGlzLmdldERhdGE8VD4oJ2dldCcsIHVybCwgb3B0aW9ucywgKF9tZXRob2Q6IHN0cmluZywgdXJsOiBzdHJpbmcsIG9wdGlvbnM6IGFueSkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8VD4odXJsLCBvcHRpb25zKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIHJlcXVlc3Qgd2l0aCBgcG9zdGAgaHR0cCBtZXRob2QuXG4gICAqL1xuICBwb3N0PFQ+KFxuICAgIHVybDogc3RyaW5nLFxuICAgIGJvZHk6IGFueSxcbiAgICBvcHRpb25zPzoge1xuICAgICAgaGVhZGVycz86XG4gICAgICAgIHwgSHR0cEhlYWRlcnNcbiAgICAgICAgfCB7XG4gICAgICAgICAgW2hlYWRlcjogc3RyaW5nXTogc3RyaW5nIHwgc3RyaW5nW107XG4gICAgICAgIH07XG4gICAgICBvYnNlcnZlPzogJ3Jlc3BvbnNlJztcbiAgICAgIHBhcmFtcz86XG4gICAgICAgIHwgSHR0cFBhcmFtc1xuICAgICAgICB8IHtcbiAgICAgICAgICBbcGFyYW06IHN0cmluZ106IHN0cmluZyB8IHN0cmluZ1tdO1xuICAgICAgICB9O1xuICAgICAgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuO1xuICAgICAgcmVzcG9uc2VUeXBlPzogJ2pzb24nO1xuICAgICAgd2l0aENyZWRlbnRpYWxzPzogYm9vbGVhbjtcbiAgICB9LFxuICApOiBPYnNlcnZhYmxlPFQ+IHtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tc2hhZG93ZWQtdmFyaWFibGVcbiAgICByZXR1cm4gdGhpcy5nZXRQb3N0RGF0YTxUPihcbiAgICAgICdwb3N0JyxcbiAgICAgIHVybCxcbiAgICAgIGJvZHksXG4gICAgICBvcHRpb25zLFxuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXNoYWRvd2VkLXZhcmlhYmxlXG4gICAgICAoX21ldGhvZDogc3RyaW5nLCB1cmw6IHN0cmluZywgYm9keTogYW55LCBvcHRpb25zOiBhbnkpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFQ+KHVybCwgYm9keSwgb3B0aW9ucyk7XG4gICAgICB9LFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgYSByZXF1ZXN0IHdpdGggYHB1dGAgaHR0cCBtZXRob2QuXG4gICAqL1xuICBwdXQ8VD4oXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgX2JvZHk6IGFueSxcbiAgICBvcHRpb25zPzoge1xuICAgICAgaGVhZGVycz86XG4gICAgICAgIHwgSHR0cEhlYWRlcnNcbiAgICAgICAgfCB7XG4gICAgICAgICAgW2hlYWRlcjogc3RyaW5nXTogc3RyaW5nIHwgc3RyaW5nW107XG4gICAgICAgIH07XG4gICAgICBvYnNlcnZlPzogJ2JvZHknO1xuICAgICAgcGFyYW1zPzpcbiAgICAgICAgfCBIdHRwUGFyYW1zXG4gICAgICAgIHwge1xuICAgICAgICAgIFtwYXJhbTogc3RyaW5nXTogc3RyaW5nIHwgc3RyaW5nW107XG4gICAgICAgIH07XG4gICAgICByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW47XG4gICAgICByZXNwb25zZVR5cGU/OiAnanNvbic7XG4gICAgICB3aXRoQ3JlZGVudGlhbHM/OiBib29sZWFuO1xuICAgIH0sXG4gICk6IE9ic2VydmFibGU8VD4ge1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1zaGFkb3dlZC12YXJpYWJsZVxuICAgIHJldHVybiB0aGlzLmdldFBvc3REYXRhPFQ+KCdwdXQnLCB1cmwsIF9ib2R5LCBvcHRpb25zLCAoX21ldGhvZDogc3RyaW5nLCB1cmw6IHN0cmluZywgX2JvZHk6IGFueSwgb3B0aW9uczogYW55KSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxUPih1cmwsIF9ib2R5LCBvcHRpb25zKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIHJlcXVlc3Qgd2l0aCBgZGVsZXRlYCBodHRwIG1ldGhvZC5cbiAgICovXG4gIGRlbGV0ZTxUPihcbiAgICB1cmw6IHN0cmluZyxcbiAgICBvcHRpb25zPzoge1xuICAgICAgaGVhZGVycz86XG4gICAgICAgIHwgSHR0cEhlYWRlcnNcbiAgICAgICAgfCB7XG4gICAgICAgICAgW2hlYWRlcjogc3RyaW5nXTogc3RyaW5nIHwgc3RyaW5nW107XG4gICAgICAgIH07XG4gICAgICBvYnNlcnZlPzogJ3Jlc3BvbnNlJztcbiAgICAgIHBhcmFtcz86XG4gICAgICAgIHwgSHR0cFBhcmFtc1xuICAgICAgICB8IHtcbiAgICAgICAgICBbcGFyYW06IHN0cmluZ106IHN0cmluZyB8IHN0cmluZ1tdO1xuICAgICAgICB9O1xuICAgICAgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuO1xuICAgICAgcmVzcG9uc2VUeXBlPzogJ2pzb24nO1xuICAgICAgd2l0aENyZWRlbnRpYWxzPzogYm9vbGVhbjtcbiAgICB9LFxuICApOiBPYnNlcnZhYmxlPFQ+IHtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tc2hhZG93ZWQtdmFyaWFibGVcbiAgICByZXR1cm4gdGhpcy5nZXREYXRhPFQ+KCdkZWxldGUnLCB1cmwsIG9wdGlvbnMsIChfbWV0aG9kOiBzdHJpbmcsIHVybDogc3RyaW5nLCBvcHRpb25zOiBhbnkpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZGVsZXRlPFQ+KHVybCwgb3B0aW9ucyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgYSByZXF1ZXN0IHdpdGggYHBhdGNoYCBodHRwIG1ldGhvZC5cbiAgICovXG4gIHBhdGNoPFQ+KFxuICAgIHVybDogc3RyaW5nLFxuICAgIGJvZHk6IGFueSxcbiAgICBvcHRpb25zPzoge1xuICAgICAgaGVhZGVycz86XG4gICAgICAgIHwgSHR0cEhlYWRlcnNcbiAgICAgICAgfCB7XG4gICAgICAgICAgW2hlYWRlcjogc3RyaW5nXTogc3RyaW5nIHwgc3RyaW5nW107XG4gICAgICAgIH07XG4gICAgICBvYnNlcnZlPzogJ3Jlc3BvbnNlJztcbiAgICAgIHBhcmFtcz86XG4gICAgICAgIHwgSHR0cFBhcmFtc1xuICAgICAgICB8IHtcbiAgICAgICAgICBbcGFyYW06IHN0cmluZ106IHN0cmluZyB8IHN0cmluZ1tdO1xuICAgICAgICB9O1xuICAgICAgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuO1xuICAgICAgcmVzcG9uc2VUeXBlPzogJ2pzb24nO1xuICAgICAgd2l0aENyZWRlbnRpYWxzPzogYm9vbGVhbjtcbiAgICB9LFxuICApOiBPYnNlcnZhYmxlPFQ+IHtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tc2hhZG93ZWQtdmFyaWFibGVcbiAgICByZXR1cm4gdGhpcy5nZXRQb3N0RGF0YTxUPihcbiAgICAgICdwYXRjaCcsXG4gICAgICB1cmwsXG4gICAgICBib2R5LFxuICAgICAgb3B0aW9ucyxcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1zaGFkb3dlZC12YXJpYWJsZVxuICAgICAgKF9tZXRob2Q6IHN0cmluZywgdXJsOiBzdHJpbmcsIGJvZHk6IGFueSwgb3B0aW9uczogYW55KTogT2JzZXJ2YWJsZTxhbnk+ID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wYXRjaDxUPih1cmwsIGJvZHksIG9wdGlvbnMpO1xuICAgICAgfSxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGEgcmVxdWVzdCB3aXRoIGBoZWFkYCBodHRwIG1ldGhvZC5cbiAgICovXG4gIGhlYWQ8VD4oXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgb3B0aW9ucz86IHtcbiAgICAgIGhlYWRlcnM/OlxuICAgICAgICB8IEh0dHBIZWFkZXJzXG4gICAgICAgIHwge1xuICAgICAgICAgIFtoZWFkZXI6IHN0cmluZ106IHN0cmluZyB8IHN0cmluZ1tdO1xuICAgICAgICB9O1xuICAgICAgb2JzZXJ2ZT86ICdyZXNwb25zZSc7XG4gICAgICBwYXJhbXM/OlxuICAgICAgICB8IEh0dHBQYXJhbXNcbiAgICAgICAgfCB7XG4gICAgICAgICAgW3BhcmFtOiBzdHJpbmddOiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICAgICAgfTtcbiAgICAgIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbjtcbiAgICAgIHJlc3BvbnNlVHlwZT86ICdqc29uJztcbiAgICAgIHdpdGhDcmVkZW50aWFscz86IGJvb2xlYW47XG4gICAgfSxcbiAgKTogT2JzZXJ2YWJsZTxUPiB7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXNoYWRvd2VkLXZhcmlhYmxlXG4gICAgcmV0dXJuIHRoaXMuZ2V0RGF0YTxUPignaGVhZCcsIHVybCwgb3B0aW9ucywgKF9tZXRob2Q6IHN0cmluZywgdXJsOiBzdHJpbmcsIG9wdGlvbnM6IGFueSkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5oZWFkPFQ+KHVybCwgb3B0aW9ucyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgYSByZXF1ZXN0IHdpdGggYG9wdGlvbnNgIGh0dHAgbWV0aG9kLlxuICAgKi9cbiAgb3B0aW9uczxUPihcbiAgICB1cmw6IHN0cmluZyxcbiAgICBvcHRpb25zPzoge1xuICAgICAgaGVhZGVycz86XG4gICAgICAgIHwgSHR0cEhlYWRlcnNcbiAgICAgICAgfCB7XG4gICAgICAgICAgW2hlYWRlcjogc3RyaW5nXTogc3RyaW5nIHwgc3RyaW5nW107XG4gICAgICAgIH07XG4gICAgICBvYnNlcnZlPzogJ3Jlc3BvbnNlJztcbiAgICAgIHBhcmFtcz86XG4gICAgICAgIHwgSHR0cFBhcmFtc1xuICAgICAgICB8IHtcbiAgICAgICAgICBbcGFyYW06IHN0cmluZ106IHN0cmluZyB8IHN0cmluZ1tdO1xuICAgICAgICB9O1xuICAgICAgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuO1xuICAgICAgcmVzcG9uc2VUeXBlPzogJ2pzb24nO1xuICAgICAgd2l0aENyZWRlbnRpYWxzPzogYm9vbGVhbjtcbiAgICB9LFxuICApOiBPYnNlcnZhYmxlPFQ+IHtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tc2hhZG93ZWQtdmFyaWFibGVcbiAgICByZXR1cm4gdGhpcy5nZXREYXRhPFQ+KFxuICAgICAgJ29wdGlvbnMnLFxuICAgICAgdXJsLFxuICAgICAgb3B0aW9ucyxcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1zaGFkb3dlZC12YXJpYWJsZVxuICAgICAgKF9tZXRob2Q6IHN0cmluZywgdXJsOiBzdHJpbmcsIG9wdGlvbnM6IGFueSkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50Lm9wdGlvbnM8VD4odXJsLCBvcHRpb25zKTtcbiAgICAgIH0sXG4gICAgKTtcbiAgfVxuXG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcbiAgcHJpdmF0ZSBnZXREYXRhPFQ+KFxuICAgIG1ldGhvZDogc3RyaW5nLFxuICAgIHVyaTogc3RyaW5nIHwgUmVxdWVzdCxcbiAgICBvcHRpb25zOiBhbnksXG4gICAgY2FsbGJhY2s6IChtZXRob2Q6IHN0cmluZywgdXJpOiBzdHJpbmcgfCBSZXF1ZXN0LCBvcHRpb25zOiBhbnkpID0+IE9ic2VydmFibGU8YW55PixcbiAgKTogT2JzZXJ2YWJsZTxUPiB7XG4gICAgbGV0IHVybCA9IHVyaTtcblxuICAgIGlmICh0eXBlb2YgdXJpICE9PSAnc3RyaW5nJykge1xuICAgICAgdXJsID0gdXJpLnVybDtcbiAgICB9XG5cbiAgICBjb25zdCB0ZW1wS2V5ID0gdXJsICsgKG9wdGlvbnMgPyBKU09OLnN0cmluZ2lmeShvcHRpb25zKSA6ICcnKTtcbiAgICBjb25zdCBrZXkgPSBtYWtlU3RhdGVLZXk8VD4odGVtcEtleSk7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB0aGlzLnJlc29sdmVEYXRhPFQ+KGtleSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKG1ldGhvZCwgdXJpLCBvcHRpb25zKS5waXBlKFxuICAgICAgICB0YXAoKGRhdGE6IFQpID0+IHtcbiAgICAgICAgICBpZiAoaXNQbGF0Zm9ybUJyb3dzZXIodGhpcy5wbGF0Zm9ybUlkKSkge1xuICAgICAgICAgICAgLy8gQ2xpZW50IG9ubHkgY29kZS5cbiAgICAgICAgICAgIC8vIG5vdGhpbmc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc1BsYXRmb3JtU2VydmVyKHRoaXMucGxhdGZvcm1JZCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q2FjaGU8VD4oa2V5LCBkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldFBvc3REYXRhPFQ+KFxuICAgIF9tZXRob2Q6IHN0cmluZyxcbiAgICB1cmk6IHN0cmluZyB8IFJlcXVlc3QsXG4gICAgYm9keTogYW55LFxuICAgIG9wdGlvbnM6IGFueSxcbiAgICBjYWxsYmFjazogKG1ldGhvZDogc3RyaW5nLCB1cmk6IHN0cmluZyB8IFJlcXVlc3QsIGJvZHk6IGFueSwgb3B0aW9uczogYW55KSA9PiBPYnNlcnZhYmxlPGFueT4sXG4gICk6IE9ic2VydmFibGU8VD4ge1xuICAgIGxldCB1cmwgPSB1cmk7XG5cbiAgICBpZiAodHlwZW9mIHVyaSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHVybCA9IHVyaS51cmw7XG4gICAgfVxuXG4gICAgY29uc3QgdGVtcEtleSA9XG4gICAgICB1cmwgKyAoYm9keSA/IEpTT04uc3RyaW5naWZ5KGJvZHkpIDogJycpICsgKG9wdGlvbnMgPyBKU09OLnN0cmluZ2lmeShvcHRpb25zKSA6ICcnKTtcbiAgICBjb25zdCBrZXkgPSBtYWtlU3RhdGVLZXk8VD4odGVtcEtleSk7XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZURhdGE8VD4oa2V5KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2soX21ldGhvZCwgdXJpLCBib2R5LCBvcHRpb25zKS5waXBlKFxuICAgICAgICB0YXAoKGRhdGE6IFQpID0+IHtcbiAgICAgICAgICBpZiAoaXNQbGF0Zm9ybUJyb3dzZXIodGhpcy5wbGF0Zm9ybUlkKSkge1xuICAgICAgICAgICAgLy8gQ2xpZW50IG9ubHkgY29kZS5cbiAgICAgICAgICAgIC8vIG5vdGhpbmc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc1BsYXRmb3JtU2VydmVyKHRoaXMucGxhdGZvcm1JZCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q2FjaGU8VD4oa2V5LCBkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlc29sdmVEYXRhPFQ+KGtleTogU3RhdGVLZXk8VD4pOiBPYnNlcnZhYmxlPFQ+IHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5nZXRGcm9tQ2FjaGU8VD4oa2V5KTtcblxuICAgIGlmICghZGF0YSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuXG4gICAgaWYgKGlzUGxhdGZvcm1Ccm93c2VyKHRoaXMucGxhdGZvcm1JZCkpIHtcbiAgICAgIC8vIENsaWVudCBvbmx5IGNvZGUuXG4gICAgICB0aGlzLnRyYW5zZmVyU3RhdGUucmVtb3ZlKGtleSk7XG4gICAgfVxuICAgIGlmIChpc1BsYXRmb3JtU2VydmVyKHRoaXMucGxhdGZvcm1JZCkpIHtcbiAgICAgIC8vIFNlcnZlciBvbmx5IGNvZGUuXG4gICAgfVxuXG4gICAgcmV0dXJuIGZyb20oUHJvbWlzZS5yZXNvbHZlPFQ+KGRhdGEpKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0Q2FjaGU8VD4oa2V5OiBTdGF0ZUtleTxUPiwgZGF0YTogVCk6IHZvaWQge1xuICAgIHJldHVybiB0aGlzLnRyYW5zZmVyU3RhdGUuc2V0PFQ+KGtleSwgZGF0YSk7XG4gIH1cblxuICBwcml2YXRlIGdldEZyb21DYWNoZTxUPihrZXk6IFN0YXRlS2V5PFQ+KTogVCB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNmZXJTdGF0ZS5nZXQ8VD4oa2V5LCBudWxsKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgVHJhbnNmZXJIdHRwU2VydmljZSB9IGZyb20gJy4vdHJhbnNmZXItaHR0cC5zZXJ2aWNlJztcblxuQE5nTW9kdWxlKHtcbiAgcHJvdmlkZXJzOiBbVHJhbnNmZXJIdHRwU2VydmljZV0sXG59KVxuZXhwb3J0IGNsYXNzIFRyYW5zZmVySHR0cE1vZHVsZSB7fVxuIl0sIm5hbWVzIjpbIm1ha2VTdGF0ZUtleSIsInRhcCIsImlzUGxhdGZvcm1Ccm93c2VyIiwiaXNQbGF0Zm9ybVNlcnZlciIsImZyb20iLCJJbmplY3RhYmxlIiwiVHJhbnNmZXJTdGF0ZSIsIkh0dHBDbGllbnQiLCJJbmplY3QiLCJQTEFURk9STV9JRCIsIk5nTW9kdWxlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7UUFTRSw2QkFDWSxhQUE0QixFQUM5QixVQUFzQixFQUNELFVBQWtCO1lBRnJDLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1lBQzlCLGVBQVUsR0FBVixVQUFVLENBQVk7WUFDRCxlQUFVLEdBQVYsVUFBVSxDQUFRO1NBQzdDOzs7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